
const request = require('superagent');
const async = require('async');

const data = require('../data');

const regionIds = data.regionIds;
const typeIds = data.typeIds;

var bestItemPrices = [];
var sortedBestPrices = [];

var typeIdArr = [];

var itemFunctions = [
function(callback){getItems(1,'36',0)},
function(callback){getItems(1,'37',0)},
function(callback){getItems(1,'38',0)},
function(callback){getItems(1,'39',0)},
function(callback){getItems(1,'40',0)},
function(callback){getItems(1,'41',0)},
function(callback){getItems(1,'42',0)},
function(callback){getItems(1,'43',0)},
function(callback){getItems(1,'44',0)},
function(callback){getItems(1,'45',0)},
function(callback){getItems(1,'49',0)},
function(callback){getItems(1,'50',0)},
function(callback){getItems(1,'51',0)},
function(callback){getItems(1,'52',0)},
function(callback){getItems(1,'53',0)},
function(callback){getItems(1,'54',0)},
function(callback){getItems(1,'56',0)},
function(callback){getItems(1,'57',0)},
function(callback){getItems(1,'58',0)},
function(callback){getItems(1,'59',0)},
function(callback){getItems(1,'60',0)},
function(callback){getItems(1,'164',0)},
function(callback){getItems(1,'165',0)},
function(callback){getItems(1,'166',0)},
function(callback){getItems(1,'178',0)},
function(callback){getItems(1,'179',0)},
function(callback){getItems(1,'180',0)},
function(callback){getItems(1,'181',0)},
function(callback){getItems(1,'182',0)},
function(callback){getItems(1,'183',0)},
function(callback){getItems(1,'184',0)},
function(callback){getItems(1,'185',0)},
function(callback){getItems(1,'186',0)},
function(callback){getItems(1,'187',0)},
function(callback){getItems(1,'188',0)},
function(callback){getItems(1,'189',0)},
function(callback){getItems(1,'190',0)},
function(callback){getItems(1,'191',0)},
function(callback){getItems(1,'192',0)},
function(callback){getItems(1,'193',0)},
function(callback){getItems(1,'194',0)},
function(callback){getItems(1,'195',0)},
function(callback){getItems(1,'196',0)},
function(callback){getItems(1,'197',0)},
function(callback){getItems(1,'198',0)},
function(callback){getItems(1,'199',0)},
function(callback){getItems(1,'200',0)},
function(callback){getItems(1,'201',0)},
function(callback){getItems(1,'202',0)},
function(callback){getItems(1,'203',0)},
function(callback){getItems(1,'204',0)},
function(callback){getItems(1,'205',0)},
function(callback){getItems(1,'206',0)},
function(callback){getItems(1,'207',0)},
function(callback){getItems(1,'208',0)},
function(callback){getItems(1,'209',0)},
function(callback){getItems(1,'210',0)},
function(callback){getItems(1,'211',0)},
function(callback){getItems(1,'212',0)},
function(callback){getItems(1,'213',0)},
function(callback){getItems(1,'215',0)},
function(callback){getItems(1,'216',0)},
function(callback){getItems(1,'217',0)},
function(callback){getItems(1,'218',0)},
function(callback){getItems(1,'219',0)},
function(callback){getItems(1,'220',0)},
function(callback){getItems(1,'221',0)},
function(callback){getItems(1,'222',0)},
function(callback){getItems(1,'223',0)},
function(callback){getItems(1,'224',0)},
function(callback){getItems(1,'225',0)},
function(callback){getItems(1,'226',0)},
function(callback){getItems(1,'227',0)},
function(callback){getItems(1,'228',0)},
function(callback){getItems(1,'229',0)},
function(callback){getItems(1,'230',0)},
function(callback){getItems(1,'231',0)},
function(callback){getItems(1,'232',0)},
function(callback){getItems(1,'233',0)},
function(callback){getItems(1,'234',0)},
function(callback){getItems(1,'235',0)},
function(callback){getItems(1,'236',0)},
function(callback){getItems(1,'237',0)},
function(callback){getItems(1,'238',0)},
function(callback){getItems(1,'239',0)},
function(callback){getItems(1,'240',0)},
function(callback){getItems(1,'241',0)},
function(callback){getItems(1,'242',0)},
function(callback){getItems(1,'243',0)},
function(callback){getItems(1,'244',0)},
function(callback){getItems(1,'245',0)},
function(callback){getItems(1,'246',0)},
function(callback){getItems(1,'247',0)},
function(callback){getItems(1,'248',0)},
function(callback){getItems(1,'249',0)},
function(callback){getItems(1,'250',0)},
function(callback){getItems(1,'251',0)},
function(callback){getItems(1,'252',0)},
function(callback){getItems(1,'253',0)},
function(callback){getItems(1,'254',0)},
function(callback){getItems(1,'255',0)},
function(callback){getItems(1,'256',0)},
function(callback){getItems(1,'257',0)},
function(callback){getItems(1,'258',0)},
function(callback){getItems(1,'259',0)},
function(callback){getItems(1,'260',0)},
function(callback){getItems(1,'261',0)},
function(callback){getItems(1,'262',0)},
function(callback){getItems(1,'263',0)},
function(callback){getItems(1,'264',0)},
function(callback){getItems(1,'265',0)},
function(callback){getItems(1,'266',0)},
function(callback){getItems(1,'267',0)},
function(callback){getItems(1,'269',0)},
function(callback){getItems(1,'270',0)},
function(callback){getItems(1,'377',0)},
function(callback){getItems(1,'380',0)},
function(callback){getItems(1,'393',0)},
function(callback){getItems(1,'394',0)},
function(callback){getItems(1,'399',0)},
function(callback){getItems(1,'400',0)},
function(callback){getItems(1,'405',0)},
function(callback){getItems(1,'406',0)},
function(callback){getItems(1,'421',0)},
function(callback){getItems(1,'434',0)},
function(callback){getItems(1,'438',0)},
function(callback){getItems(1,'439',0)},
function(callback){getItems(1,'440',0)},
function(callback){getItems(1,'442',0)},
function(callback){getItems(1,'443',0)},
function(callback){getItems(1,'444',0)},
function(callback){getItems(1,'447',0)},
function(callback){getItems(1,'448',0)},
function(callback){getItems(1,'450',0)},
function(callback){getItems(1,'451',0)},
function(callback){getItems(1,'452',0)},
function(callback){getItems(1,'453',0)},
function(callback){getItems(1,'454',0)},
function(callback){getItems(1,'455',0)},
function(callback){getItems(1,'456',0)},
function(callback){getItems(1,'457',0)},
function(callback){getItems(1,'458',0)},
function(callback){getItems(1,'459',0)},
function(callback){getItems(1,'460',0)},
function(callback){getItems(1,'461',0)},
function(callback){getItems(1,'462',0)},
function(callback){getItems(1,'463',0)},
function(callback){getItems(1,'464',0)},
function(callback){getItems(1,'482',0)},
function(callback){getItems(1,'483',0)},
function(callback){getItems(1,'484',0)},
function(callback){getItems(1,'485',0)},
function(callback){getItems(1,'486',0)},
function(callback){getItems(1,'487',0)},
function(callback){getItems(1,'488',0)},
function(callback){getItems(1,'489',0)},
function(callback){getItems(1,'490',0)},
function(callback){getItems(1,'491',0)},
function(callback){getItems(1,'492',0)},
function(callback){getItems(1,'493',0)},
function(callback){getItems(1,'494',0)},
function(callback){getItems(1,'495',0)},
function(callback){getItems(1,'496',0)},
function(callback){getItems(1,'497',0)},
function(callback){getItems(1,'498',0)},
function(callback){getItems(1,'499',0)},
function(callback){getItems(1,'501',0)},
function(callback){getItems(1,'503',0)},
function(callback){getItems(1,'506',0)},
function(callback){getItems(1,'508',0)},
function(callback){getItems(1,'509',0)},
function(callback){getItems(1,'518',0)},
function(callback){getItems(1,'519',0)},
function(callback){getItems(1,'520',0)},
function(callback){getItems(1,'521',0)},
function(callback){getItems(1,'522',0)},
function(callback){getItems(1,'523',0)},
function(callback){getItems(1,'524',0)},
function(callback){getItems(1,'526',0)},
function(callback){getItems(1,'527',0)},
function(callback){getItems(1,'529',0)},
function(callback){getItems(1,'530',0)},
function(callback){getItems(1,'533',0)},
function(callback){getItems(1,'561',0)},
function(callback){getItems(1,'562',0)},
function(callback){getItems(1,'563',0)},
function(callback){getItems(1,'564',0)},
function(callback){getItems(1,'565',0)},
function(callback){getItems(1,'566',0)},
function(callback){getItems(1,'567',0)},
function(callback){getItems(1,'568',0)},
function(callback){getItems(1,'569',0)},
function(callback){getItems(1,'570',0)},
function(callback){getItems(1,'571',0)},
function(callback){getItems(1,'572',0)},
function(callback){getItems(1,'573',0)},
function(callback){getItems(1,'574',0)},
function(callback){getItems(1,'575',0)},
function(callback){getItems(1,'577',0)},
function(callback){getItems(1,'578',0)},
function(callback){getItems(1,'580',0)},
function(callback){getItems(1,'581',0)},
function(callback){getItems(1,'582',0)},
function(callback){getItems(1,'583',0)},
function(callback){getItems(1,'584',0)},
function(callback){getItems(1,'585',0)},
function(callback){getItems(1,'586',0)},
function(callback){getItems(1,'587',0)},
function(callback){getItems(1,'588',0)},
function(callback){getItems(1,'589',0)},
function(callback){getItems(1,'590',0)},
function(callback){getItems(1,'591',0)},
function(callback){getItems(1,'592',0)},
function(callback){getItems(1,'593',0)},
function(callback){getItems(1,'594',0)},
function(callback){getItems(1,'595',0)},
function(callback){getItems(1,'596',0)},
function(callback){getItems(1,'597',0)},
function(callback){getItems(1,'598',0)},
function(callback){getItems(1,'599',0)},
function(callback){getItems(1,'600',0)},
function(callback){getItems(1,'601',0)},
function(callback){getItems(1,'602',0)},
function(callback){getItems(1,'603',0)},
function(callback){getItems(1,'605',0)},
function(callback){getItems(1,'606',0)},
function(callback){getItems(1,'607',0)},
function(callback){getItems(1,'608',0)},
function(callback){getItems(1,'609',0)},
function(callback){getItems(1,'613',0)},
function(callback){getItems(1,'614',0)},
function(callback){getItems(1,'615',0)},
function(callback){getItems(1,'616',0)},
function(callback){getItems(1,'617',0)},
function(callback){getItems(1,'618',0)},
function(callback){getItems(1,'619',0)},
function(callback){getItems(1,'620',0)},
function(callback){getItems(1,'621',0)},
function(callback){getItems(1,'622',0)},
function(callback){getItems(1,'623',0)},
function(callback){getItems(1,'624',0)},
function(callback){getItems(1,'625',0)},
function(callback){getItems(1,'626',0)},
function(callback){getItems(1,'627',0)},
function(callback){getItems(1,'628',0)},
function(callback){getItems(1,'629',0)},
function(callback){getItems(1,'630',0)},
function(callback){getItems(1,'631',0)},
function(callback){getItems(1,'632',0)},
function(callback){getItems(1,'633',0)},
function(callback){getItems(1,'634',0)},
function(callback){getItems(1,'635',0)},
function(callback){getItems(1,'638',0)},
function(callback){getItems(1,'639',0)},
function(callback){getItems(1,'640',0)},
function(callback){getItems(1,'641',0)},
function(callback){getItems(1,'642',0)},
function(callback){getItems(1,'643',0)},
function(callback){getItems(1,'644',0)},
function(callback){getItems(1,'645',0)},
function(callback){getItems(1,'648',0)},
function(callback){getItems(1,'649',0)},
function(callback){getItems(1,'650',0)},
function(callback){getItems(1,'651',0)},
function(callback){getItems(1,'652',0)},
function(callback){getItems(1,'653',0)},
function(callback){getItems(1,'654',0)},
function(callback){getItems(1,'655',0)},
function(callback){getItems(1,'656',0)},
function(callback){getItems(1,'657',0)},
function(callback){getItems(1,'670',0)},
function(callback){getItems(1,'671',0)},
function(callback){getItems(1,'672',0)},
function(callback){getItems(1,'681',0)},
function(callback){getItems(1,'682',0)},
function(callback){getItems(1,'683',0)},
function(callback){getItems(1,'684',0)},
function(callback){getItems(1,'685',0)},
function(callback){getItems(1,'686',0)},
function(callback){getItems(1,'687',0)},
function(callback){getItems(1,'688',0)},
function(callback){getItems(1,'689',0)},
function(callback){getItems(1,'690',0)},
function(callback){getItems(1,'691',0)},
function(callback){getItems(1,'692',0)},
function(callback){getItems(1,'693',0)},
function(callback){getItems(1,'784',0)},
function(callback){getItems(1,'785',0)},
function(callback){getItems(1,'786',0)},
function(callback){getItems(1,'788',0)},
function(callback){getItems(1,'790',0)},
function(callback){getItems(1,'803',0)},
function(callback){getItems(1,'804',0)},
function(callback){getItems(1,'805',0)},
function(callback){getItems(1,'806',0)},
function(callback){getItems(1,'807',0)},
function(callback){getItems(1,'808',0)},
function(callback){getItems(1,'809',0)},
function(callback){getItems(1,'810',0)},
function(callback){getItems(1,'811',0)},
function(callback){getItems(1,'812',0)},
function(callback){getItems(1,'813',0)},
function(callback){getItems(1,'814',0)},
function(callback){getItems(1,'819',0)},
function(callback){getItems(1,'820',0)},
function(callback){getItems(1,'821',0)},
function(callback){getItems(1,'822',0)},
function(callback){getItems(1,'823',0)},
function(callback){getItems(1,'824',0)},
function(callback){getItems(1,'825',0)},
function(callback){getItems(1,'826',0)},
function(callback){getItems(1,'827',0)},
function(callback){getItems(1,'828',0)},
function(callback){getItems(1,'829',0)},
function(callback){getItems(1,'830',0)},
function(callback){getItems(1,'831',0)},
function(callback){getItems(1,'832',0)},
function(callback){getItems(1,'833',0)},
function(callback){getItems(1,'834',0)},
function(callback){getItems(1,'835',0)},
function(callback){getItems(1,'836',0)},
function(callback){getItems(1,'837',0)},
function(callback){getItems(1,'838',0)},
function(callback){getItems(1,'839',0)},
function(callback){getItems(1,'840',0)},
function(callback){getItems(1,'841',0)},
function(callback){getItems(1,'842',0)},
function(callback){getItems(1,'843',0)},
function(callback){getItems(1,'844',0)},
function(callback){getItems(1,'845',0)},
function(callback){getItems(1,'846',0)},
function(callback){getItems(1,'847',0)},
function(callback){getItems(1,'848',0)},
function(callback){getItems(1,'879',0)},
function(callback){getItems(1,'880',0)},
function(callback){getItems(1,'881',0)},
function(callback){getItems(1,'882',0)},
function(callback){getItems(1,'883',0)},
function(callback){getItems(1,'884',0)},
function(callback){getItems(1,'885',0)},
function(callback){getItems(1,'886',0)},
function(callback){getItems(1,'887',0)},
function(callback){getItems(1,'888',0)},
function(callback){getItems(1,'889',0)},
function(callback){getItems(1,'890',0)},
function(callback){getItems(1,'891',0)},
function(callback){getItems(1,'892',0)},
function(callback){getItems(1,'893',0)},
function(callback){getItems(1,'894',0)},
function(callback){getItems(1,'895',0)},
function(callback){getItems(1,'896',0)},
function(callback){getItems(1,'897',0)},
function(callback){getItems(1,'898',0)},
function(callback){getItems(1,'899',0)},
function(callback){getItems(1,'900',0)},
function(callback){getItems(1,'901',0)},
function(callback){getItems(1,'902',0)},
function(callback){getItems(1,'935',0)},
function(callback){getItems(1,'936',0)},
function(callback){getItems(1,'937',0)},
function(callback){getItems(1,'938',0)},
function(callback){getItems(1,'939',0)},
function(callback){getItems(1,'940',0)},
function(callback){getItems(1,'941',0)},
function(callback){getItems(1,'943',0)},
function(callback){getItems(1,'944',0)},
function(callback){getItems(1,'945',0)},
function(callback){getItems(1,'946',0)},
function(callback){getItems(1,'947',0)},
function(callback){getItems(1,'948',0)},
function(callback){getItems(1,'949',0)},
function(callback){getItems(1,'950',0)},
function(callback){getItems(1,'952',0)},
function(callback){getItems(1,'953',0)},
function(callback){getItems(1,'954',0)},
function(callback){getItems(1,'955',0)},
function(callback){getItems(1,'956',0)},
function(callback){getItems(1,'960',0)},
function(callback){getItems(1,'961',0)},
function(callback){getItems(1,'962',0)},
function(callback){getItems(1,'963',0)},
function(callback){getItems(1,'964',0)},
function(callback){getItems(1,'965',0)},
function(callback){getItems(1,'966',0)},
function(callback){getItems(1,'967',0)},
function(callback){getItems(1,'968',0)},
function(callback){getItems(1,'969',0)},
function(callback){getItems(1,'970',0)},
function(callback){getItems(1,'971',0)},
function(callback){getItems(1,'972',0)},
function(callback){getItems(1,'973',0)},
function(callback){getItems(1,'974',0)},
function(callback){getItems(1,'975',0)},
function(callback){getItems(1,'976',0)},
function(callback){getItems(1,'977',0)},
function(callback){getItems(1,'978',0)},
function(callback){getItems(1,'979',0)},
function(callback){getItems(1,'983',0)},
function(callback){getItems(1,'984',0)},
function(callback){getItems(1,'985',0)},
function(callback){getItems(1,'986',0)},
function(callback){getItems(1,'987',0)},
function(callback){getItems(1,'988',0)},
function(callback){getItems(1,'989',0)},
function(callback){getItems(1,'990',0)},
function(callback){getItems(1,'991',0)},
function(callback){getItems(1,'992',0)},
function(callback){getItems(1,'994',0)},
function(callback){getItems(1,'995',0)},
function(callback){getItems(1,'996',0)},
function(callback){getItems(1,'997',0)},
function(callback){getItems(1,'998',0)},
function(callback){getItems(1,'999',0)},
function(callback){getItems(1,'1002',0)},
function(callback){getItems(1,'1010',0)},
function(callback){getItems(1,'1013',0)},
function(callback){getItems(1,'1026',0)},
function(callback){getItems(1,'1027',0)},
function(callback){getItems(1,'1032',0)},
function(callback){getItems(1,'1033',0)},
function(callback){getItems(1,'1067',0)},
function(callback){getItems(1,'1071',0)},
function(callback){getItems(1,'1072',0)},
function(callback){getItems(1,'1073',0)},
function(callback){getItems(1,'1074',0)},
function(callback){getItems(1,'1075',0)},
function(callback){getItems(1,'1076',0)},
function(callback){getItems(1,'1079',0)},
function(callback){getItems(1,'1080',0)},
function(callback){getItems(1,'1095',0)},
function(callback){getItems(1,'1096',0)},
function(callback){getItems(1,'1099',0)},
function(callback){getItems(1,'1100',0)},
function(callback){getItems(1,'1102',0)},
function(callback){getItems(1,'1103',0)},
function(callback){getItems(1,'1105',0)},
function(callback){getItems(1,'1106',0)},
function(callback){getItems(1,'1109',0)},
function(callback){getItems(1,'1112',0)},
function(callback){getItems(1,'1113',0)},
function(callback){getItems(1,'1114',0)},
function(callback){getItems(1,'1115',0)},
function(callback){getItems(1,'1116',0)},
function(callback){getItems(1,'1117',0)},
function(callback){getItems(1,'1118',0)},
function(callback){getItems(1,'1119',0)},
function(callback){getItems(1,'1120',0)},
function(callback){getItems(1,'1121',0)},
function(callback){getItems(1,'1122',0)},
function(callback){getItems(1,'1123',0)},
function(callback){getItems(1,'1124',0)},
function(callback){getItems(1,'1125',0)},
function(callback){getItems(1,'1126',0)},
function(callback){getItems(1,'1128',0)},
function(callback){getItems(1,'1129',0)},
function(callback){getItems(1,'1130',0)},
function(callback){getItems(1,'1131',0)},
function(callback){getItems(1,'1132',0)},
function(callback){getItems(1,'1133',0)},
function(callback){getItems(1,'1134',0)},
function(callback){getItems(1,'1135',0)},
function(callback){getItems(1,'1136',0)},
function(callback){getItems(1,'1137',0)},
function(callback){getItems(1,'1138',0)},
function(callback){getItems(1,'1139',0)},
function(callback){getItems(1,'1140',0)},
function(callback){getItems(1,'1141',0)},
function(callback){getItems(1,'1142',0)},
function(callback){getItems(1,'1143',0)},
function(callback){getItems(1,'1144',0)},
function(callback){getItems(1,'1145',0)},
function(callback){getItems(1,'1146',0)},
function(callback){getItems(1,'1147',0)},
function(callback){getItems(1,'1148',0)},
function(callback){getItems(1,'1149',0)},
function(callback){getItems(1,'1150',0)},
function(callback){getItems(1,'1151',0)},
function(callback){getItems(1,'1152',0)},
function(callback){getItems(1,'1153',0)},
function(callback){getItems(1,'1154',0)},
function(callback){getItems(1,'1155',0)},
function(callback){getItems(1,'1156',0)},
function(callback){getItems(1,'1157',0)},
function(callback){getItems(1,'1158',0)},
function(callback){getItems(1,'1159',0)},
function(callback){getItems(1,'1160',0)},
function(callback){getItems(1,'1161',0)},
function(callback){getItems(1,'1162',0)},
function(callback){getItems(1,'1163',0)},
function(callback){getItems(1,'1164',0)},
function(callback){getItems(1,'1165',0)},
function(callback){getItems(1,'1166',0)},
function(callback){getItems(1,'1167',0)},
function(callback){getItems(1,'1168',0)},
function(callback){getItems(1,'1169',0)},
function(callback){getItems(1,'1170',0)},
function(callback){getItems(1,'1171',0)},
function(callback){getItems(1,'1172',0)},
function(callback){getItems(1,'1173',0)},
function(callback){getItems(1,'1174',0)},
function(callback){getItems(1,'1175',0)},
function(callback){getItems(1,'1176',0)},
function(callback){getItems(1,'1177',0)},
function(callback){getItems(1,'1178',0)},
function(callback){getItems(1,'1179',0)},
function(callback){getItems(1,'1182',0)},
function(callback){getItems(1,'1183',0)},
function(callback){getItems(1,'1184',0)},
function(callback){getItems(1,'1185',0)},
function(callback){getItems(1,'1186',0)},
function(callback){getItems(1,'1190',0)},
function(callback){getItems(1,'1191',0)},
function(callback){getItems(1,'1192',0)},
function(callback){getItems(1,'1193',0)},
function(callback){getItems(1,'1194',0)},
function(callback){getItems(1,'1195',0)},
function(callback){getItems(1,'1196',0)},
function(callback){getItems(1,'1197',0)},
function(callback){getItems(1,'1198',0)},
function(callback){getItems(1,'1201',0)},
function(callback){getItems(1,'1202',0)},
function(callback){getItems(1,'1204',0)},
function(callback){getItems(1,'1205',0)},
function(callback){getItems(1,'1208',0)},
function(callback){getItems(1,'1210',0)},
function(callback){getItems(1,'1212',0)},
function(callback){getItems(1,'1214',0)},
function(callback){getItems(1,'1215',0)},
function(callback){getItems(1,'1216',0)},
function(callback){getItems(1,'1217',0)},
function(callback){getItems(1,'1218',0)},
function(callback){getItems(1,'1220',0)},
function(callback){getItems(1,'1221',0)},
function(callback){getItems(1,'1223',0)},
function(callback){getItems(1,'1224',0)},
function(callback){getItems(1,'1225',0)},
function(callback){getItems(1,'1226',0)},
function(callback){getItems(1,'1227',0)},
function(callback){getItems(1,'1228',0)},
function(callback){getItems(1,'1229',0)},
function(callback){getItems(1,'1230',0)},
function(callback){getItems(1,'1231',0)},
function(callback){getItems(1,'1232',0)},
function(callback){getItems(1,'1233',0)},
function(callback){getItems(1,'1236',0)},
function(callback){getItems(1,'1237',0)},
function(callback){getItems(1,'1240',0)},
function(callback){getItems(1,'1242',0)},
function(callback){getItems(1,'1244',0)},
function(callback){getItems(1,'1245',0)},
function(callback){getItems(1,'1246',0)},
function(callback){getItems(1,'1247',0)},
function(callback){getItems(1,'1248',0)},
function(callback){getItems(1,'1249',0)},
function(callback){getItems(1,'1254',0)},
function(callback){getItems(1,'1255',0)},
function(callback){getItems(1,'1256',0)},
function(callback){getItems(1,'1257',0)},
function(callback){getItems(1,'1262',0)},
function(callback){getItems(1,'1264',0)},
function(callback){getItems(1,'1265',0)},
function(callback){getItems(1,'1266',0)},
function(callback){getItems(1,'1267',0)},
function(callback){getItems(1,'1272',0)},
function(callback){getItems(1,'1274',0)},
function(callback){getItems(1,'1275',0)},
function(callback){getItems(1,'1276',0)}

]

function getItems(page, typeId, region) {
  console.log(region)
  var regionId = regionIds[region];
  var itemsRoot = `https://esi.tech.ccp.is/latest/markets/${regionId}/orders/`;
  var itemsParams = {
    "datasource": "tranquility",
    "order_type": "all",
    "page": page,
    "type_id": typeId
  }
  const itemsUrl = constructURL(itemsRoot, itemsParams);
  request
   .get(itemsUrl)
   .then(function(res) {
     if (region < regionIds.length - 2) {
       //console.log(res.body);
       //console.log(bestItemPrices);
       checkSystemPrices(res.body, typeId);
       getItems(page, typeId, region + 1)
     } else {
       console.log(bestItemPrices);
       var sortedBestPrices = sortByKey(bestItemPrices.filter(value => Object.keys(value).length !== 0), "profit");
       console.log(sortedBestPrices[0])
     }
   })
   .catch(function(err) {
     if (region < regionIds.length - 2) {
       getItems(page, typeId, region + 1)
     } else {
       console.log(bestItemPrices);
       var sortedBestPrices = sortByKey(bestItemPrices.filter(value => Object.keys(value).length !== 0), "profit");
       console.log(sortedBestPrices[0])
     }
   });
}

function checkSystemPrices(arr, typeId) {
  if(!bestItemPrices[parseInt(typeId)]) {
    bestItemPrices[parseInt(typeId)] = {}
  }
  if(bestItemPrices[parseInt(typeId)].buy && bestItemPrices[parseInt(typeId)].sell) {
      bestItemPrices[parseInt(typeId)].profit = bestItemPrices[parseInt(typeId)].buy.price / bestItemPrices[parseInt(typeId)].sell.price
  }
  var i;
  for (i = 0; i < arr.length; i++) {
    if (arr[i].is_buy_order) {
      checkBuyOrder(arr[i])
    } else {
      checkSellOrder(arr[i])
    };
  }
}

function checkBuyOrder(item) {
  var id = parseInt(item.type_id);
  if(!bestItemPrices[id].buy) {
    bestItemPrices[id].buy = item;
  }
  if (bestItemPrices[id].buy.price < item.price) {
    bestItemPrices[id].buy = item;
  }
}

function checkSellOrder(item) {
  var id = parseInt(item.type_id);
  if(!bestItemPrices[id].sell) {
    bestItemPrices[id].sell = item;
  }
  if (bestItemPrices[id].sell.price > item.price) {
    bestItemPrices[id].sell = item;
  }
}

function constructURL(root, params) {
  return Object.keys(params).reduce((acc, el, index) => {
    return index === 0 ? `${acc}?${el}=${params[el]}` : `${acc}&${el}=${params[el]}`;
  }, root)
}

function sortByKey(array, key) {
  return array.sort(function(a, b) {
    var x = a[key]; var y = b[key];
    return ((x < y) ? 1 : ((x > y) ? -1 : 0));
  });
}

function analyseRoutes() {
  //getItems(1, "657", 0)
  async.parallel(
    itemFunctions,
    //typeIdArr,
    function(err, results){

  });
};



module.exports = analyseRoutes;
